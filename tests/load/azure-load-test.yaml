version: 1.0
testName: EduMatch Load Test
testPlan: tests/load/k6-script.js
engineInstances: 1

configurationFiles:
  - tests/load/test-config.yaml

# Environment variables
env:
  - name: TARGET_URL
    value: $(TARGET_URL)
  - name: DURATION
    value: $(DURATION)
  - name: VUS
    value: $(VUS)
  - name: SCENARIO
    value: load-test

# Fail criteria
failureCriteria:
  - avg(response_time_ms) > 2000
  - percentage(error) > 1

# Load test configuration
loadConfiguration:
  engineInstances: 1

# Auto-stop criteria
autoStop:
  errorPercentage: 5
  timeWindow: 60

# Test run parameters
properties:
  userPropertyFile: tests/load/test-config.yaml

# Monitoring
monitoring:
  resourceIds:
    - /subscriptions/{subscription-id}/resourceGroups/edumatch-rg/providers/Microsoft.App/containerApps/auth-service-app
    - /subscriptions/{subscription-id}/resourceGroups/edumatch-rg/providers/Microsoft.App/containerApps/scholarship-service-app
    - /subscriptions/{subscription-id}/resourceGroups/edumatch-rg/providers/Microsoft.App/containerApps/chat-service-app
    - /subscriptions/{subscription-id}/resourceGroups/edumatch-rg/providers/Microsoft.App/containerApps/matching-service-app
